<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="style.css">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
		<link rel="shortcut icon" type="image/jpg" href="images/Bird.png"/>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/p5@latest/lib/addons/p5.dom.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>
		<script src="main.js" type="text/javascript"></script>
		<script src="sketch.js" type="text/javascript"></script>
		

		<title>Tucan Speak</title>

		<script>
			function signOut() {
				$(document).ready(function() {
					$.ajax({
						type: 'POST',
						url: '/sign-out', 
						contentType: 'application/json',
						success: function(response) {
							window.location.href = response.url;
						},
						error: function(xhr, status, error) {
							window.location.href = "/login";
						}
					});
				});
			}

			function changeLanguage() {

			}

			$(document).ready(function() {
				$.ajax({
					type: 'POST',
					url: '/', 
					contentType: 'application/json',
					success: function(response) {
						document.getElementById("level_value").textContent = `Level ${response.level+1}`;
						document.getElementById("level_fill").style.width = `${Math.floor(100*response.xp/20)}%`;
						if (response.flightWins >= 5) {
							document.getElementById("first").click();
						}
						document.getElementById("flight_wins").textContent = `Numbers (${response.flightWins}/5 Tucan Flight Wins)`;
						if (response.drawWins >= 5) {
							document.getElementById("second").click();
						}
						document.getElementById("draw_wins").textContent = `Objects (${response.drawWins}/5 Tucan Draw Wins)`;

						if (response.collectedReward) {
							document.getElementById("third").click();
						}
						document.getElementById("reward").textContent = 'Reward: 5XP⭐';
					},
					error: function(xhr, status, error) {
						console.error('Error checking authentication:', xhr.responseText);
					}
				});
			});
		</script>
	</head>
	<body>

		<div class="background">
			<img src="images/Background.png" alt="background" class="background-img">
		</div> 

		<div class="menu">
			<button class="menu-button">Menu</button>
			<ul class="menu-items">
				<li><a href="/">Home</a></li>
				<li><a href="/flappy">Tucan Flight</a></li>
				<li><a href="/game">Tucan Draw</a></li>
				<li><a href="#" onclick="return changeLanguage()">Cambiar Idioma</a></li>
				<li><a href="#" onclick="return signOut()">Sign out</a></li>
			</ul>
		</div>

		<div class="top-row">
			<div class="level_bar">
				<div class="level_bar_value" id="level_value">Level</div>
				<div class="level_fill" id="level_fill"></div>
				<div class="level_bar_icon">
					<img src="images/star.png" alt="star">
				</div>
			</div> 
		</div>

		<div class="lesson-to-do">
			<ul class="list">
				<h2>Daily Tasks</h2>
				<li class="list_item">
					<input type="checkbox" class="hidden-box" id="first">
					<label for="first" class="check_label">
						<span class="check_label_text" id="flight_wins">Numbers (0/5 Tucan Flight Wins)</span>
						<span class="check_label_box"></span>
					</label>
				</li>
				<li class="list_item">
					<input type="checkbox" class="hidden-box" id="second">
					<label for="second" class="check_label">
						<span class="check_label_text" id="draw_wins">Objects (0/5 Tucan Draw Wins)</span>
						<span class="check_label_box"></span>
					</label>
				</li>

				<li class="list_item">
					<input type="checkbox" class="hidden-box" id="third">
					<label for="third" class="check_label">
						<span class="check_label_text" id="reward">Reward: 5XP⭐</span>
						<span class="check_label_box"></span>
					</label>
				</li>

			</ul>			
		</div>

		<!--Julian Part-->
        <div id="audio"></div>
        <div id="output"></div>
        <!-- <div id="response"></div> -->
        <input type="text" id="message" placeholder="Ask me anything">
        <button id="ask" class="image-button"><img src="./send.png"></button>
        <br>
		<p id="response" class="bubble speech"></p>

		

		<!-- <button id="startRecording">Start Recording</button>
        <button id="stopRecording" disabled>Stop Recording</button>
        <div id="audio"></div>
        <div id="output"></div>
		<input type="text" id="message" placeholder="Ask me anything">
		<button id="ask" class="image-button"><img src="images/send.png" alt="send button"></button>
		<p id="response" class="bubble speech"></p>
 -->

	</body>

</html>